{% extends "layout.html" %}

{% block title %}
Search Results -
{% endblock %}

{% block body %}
<div class="search-result-container">

    <!-- Secondary search bar -->
    {% if search_type == "all" %}
    <form class="mb-5" action="{{ url_for('search', search_type='all') }}" method="GET">
        <div class="row">
            <div class="col-auto">
                <h2>You searched for:</h2>
            </div>
            <div class="col-auto col-md-4">
                <input type="search" name="query" class="form-control result-search-bar" value="{{ query }}"
                    placeholder="It was '{{ query }}' in case you forget." aria-label="Search" />
            </div>
            <div class="col-auto col-md-4">
                <button type="submit" class="btn border-0 result-search-submit px-5 my-4 my-md-0"><i
                        class="fas fa-arrow-right"></i></button>
            </div>
        </div>
    </form>

    <!-- No search bar in case of search by keyword-->
    {% elif search_type == "by-keywords" %}
    <h2>Search by keyword: <strong>{{ query }}</strong> </h2>
    {% endif %}

    <!-- If search brought results -->
    {% if success %}

    {% for result in search_results %}
    <hr>
    <a href="{{ result['detail_link'] }}">
        <div class="search-result-box">

            <div class="result-image">
                <img src="{{ result['poster'] }}">
            </div>
            <div>
                <h2 class="fw-bold">{{ result["full_title"] }}</h2>
                {% if result["date"] %}
                {{ result["date"] }}
                {% endif %}
                <h5>{{ result["description"] }}</h5>
            </div>
        </div>
    </a>
    {% endfor %}

    {% else %}
    <h3>Sorry, no matches were found.</h3>

    {% endif %}


</div>

{% endblock %}
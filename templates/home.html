{% extends "layout.html" %} {% block head %}

<!-- CSS -->
<link rel="stylesheet" href="https://unpkg.com/flickity@2/dist/flickity.min.css" />

{% endblock %} {% block body %}

<!-- Flickity HTML init -->
<div class="carousel-large" data-flickity='{ "wrapAround": true, "autoPlay": 5000, "lazyLoad": true }'>
    {% for item in spotlight %}
    <div class="gallery-cell">

        <a href="{{ url_for('get_movie_detail', id = item['id']) }}">
            {% if item['backdrop_path'] == "None" %}
            <div class="top-right-notif-text">No Image Available</div>
            {% else %}
            <div class="desktop-backdrop">
                <img src="https://image.tmdb.org/t/p/w1280/{{ item['backdrop_path'] }}" />
            </div>
            <div class="mobile-backdrop">
                <img src="https://image.tmdb.org/t/p/w300/{{ item['poster_path'] }}" />
            </div>
            {% endif %}

            {% if item["media_type"] == "movie" %}
            {% set title = "title" %}
            {% set date = "release_date" %}
            {% else %}
            {% set title = "name" %}
            {% set date = "first_air_date" %}
            {% endif %}

            <span class="carousel-image-caption">
                <h1>
                    {{ item["original_" ~ title] }}
                    {% if (item["original_language"] != "en") and (item["original_" ~ title] != item[title]) %}
                    &nbsp;({{ item[title] }})
                    {% endif %}
                </h1>
                <h5 class="carousel-image-overview mb-3">{{ item["overview"]|truncate(250,true) }}</h5>
                {% for inneritem, val in item.items() %} {% if inneritem == date %}
                <h4><i class="fas fa-calendar"></i>{{ val.split("-")[0] }}</h4>
                {% endif %} {% endfor %}

                <h4><i class="fas fa-star-half-alt"></i>
                    {% if item["vote_average"] == 0 %}
                    N/A
                    {% else %}
                    {{ item["vote_average"] }}
                    {% endif %}
                </h4>
            </span>
        </a>
    </div>
    {% endfor %}
</div>

<div class="scroller-display my-5">
    <h1>Movie Spotlight</h1>
    <div class="scrolling-wrapper"
        data-flickity='{ "cellAlign": "left", "lazyLoad": true,"freeScroll": true, "contain": true, "pageDots": false  }'>
        {% for item in trending_movies %}

        <div class="card">
            <a href="{{ url_for('get_movie_detail', id = item['id']) }}">
                <img class="poster" src="https://image.tmdb.org/t/p/w300/{{ item['poster_path'] }}" />
            </a>

        </div>

        {% endfor %}
    </div>
</div>

<div class="scroller-display my-5">
    <h1>Trending on TV</h1>
    <div class="scrolling-wrapper"
        data-flickity='{ "cellAlign": "left", "lazyLoad": true,"freeScroll": true, "contain": true, "pageDots": false  }'>
        {% for item in trending_shows %}

        <div class="card">
            <a href="{{ url_for('get_movie_detail', id = item['id']) }}">
                <img class="poster" src="https://image.tmdb.org/t/p/w300/{{ item['poster_path'] }}" />
            </a>

        </div>

        {% endfor %}
    </div>
</div>
{% endblock %} {% block script %}

<!-- JavaScript -->
<script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>

{% endblock %}